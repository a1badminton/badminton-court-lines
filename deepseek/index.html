<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Badminton Court Knowledge Quiz</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            width: 900px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
            text-align: center;
        }
        h1 {
            font-size: 2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin: 5px 0;
        }
        .instructions {
            background: rgba(0, 0, 0, 0.6);
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        #game-container {
            flex: 1;
            border: 3px solid #fff;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        .score-display {
            font-size: 1.2rem;
            margin: 8px 0;
            font-weight: bold;
        }
        .progress-display {
            font-size: 0.9rem;
            margin: 5px 0;
        }
        .btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .btn:hover {
            background: #ff8e8e;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.4);
        }
        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .mode-btn {
            background: #4ecdc4;
        }
        .mode-btn:hover {
            background: #81e8e1;
        }
        .footer {
            margin-top: 10px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
        }
        .completion-message {
            font-size: 1.2rem;
            color: #4ecdc4;
            font-weight: bold;
            margin-top: 10px;
        }
        .controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Badminton Court Knowledge Quiz</h1>
        <div class="instructions">
            <p>Learn about badminton court lines and service areas! Click on different game modes to start.</p>
        </div>
        
        <div class="score-display">Score: <span id="score">0</span></div>
        <div class="progress-display">Progress: <span id="progress">0</span>/<span id="total-questions">5</span> questions answered correctly</div>
        
        <div id="game-container"></div>
        
        <div class="controls">
            <button id="learn-btn" class="btn mode-btn">Learn Mode</button>
            <button id="quiz-btn" class="btn">Quiz Mode</button>
            <button id="reset-btn" class="btn">Reset Game</button>
        </div>
        
        <div id="completion-message" class="completion-message" style="display: none;">
            Congratulations! You've answered all questions correctly!
        </div>
        
        <div class="footer">
            <p>Created with Phaser.js | Hover over court areas to learn, then test your knowledge in Quiz Mode!</p>
        </div>
    </div>

    <script>
        // Main game configuration
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 400,
            parent: 'game-container',
            backgroundColor: '#2c3e50',
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        // Game variables
        let game;
        let score = 0;
        let currentMode = 'learn';
        let courtGraphics;
        let infoText;
        let quizQuestion;
        let quizOptions = [];
        let correctAnswer;
        let answeredQuestions = new Set();
        let correctlyAnswered = 0;

        // Badminton court data
        const courtAreas = [
            { name: "Right Service Court", x: 575, y: 100, width: 70, height: 100, color: 0xff6b6b, description: "Area for serving in singles and doubles. Service must land here when serving to the right side." },
            { name: "Left Service Court", x: 575, y: 250, width: 70, height: 100, color: 0x4ecdc4, description: "Area for serving in singles and doubles. Service must land here when serving to the left side." },
            { name: "Back Boundary Line", x: 400, y: 30, width: 450, height: 5, color: 0xffffff, description: "The back boundary line at the end of the court. Shots landing beyond this line are out." },
            { name: "Short Service Line", x: 400, y: 150, width: 450, height: 5, color: 0xffff00, description: "The line beyond which a serve must land. Serves that land before this line are faults." },
            { name: "Center Line", x: 400, y: 100, width: 5, height: 300, color: 0xffffff, description: "Divides the court into left and right service courts. Service must be delivered to the opposite court." },
            { name: "Doubles Sideline", x: 650, y: 200, width: 5, height: 300, color: 0xffffff, description: "The outer boundary for doubles matches. Shots landing outside this line are out in doubles." },
            { name: "Singles Sideline", x: 550, y: 200, width: 5, height: 300, color: 0xffffff, description: "The inner boundary for singles matches. Shots landing outside this line are out in singles." }
        ];

        // Quiz questions
        const quizQuestions = [
            {
                id: 1,
                question: "Where must a serve land in singles when serving to the right?",
                options: ["Right Service Court", "Left Service Court", "Anywhere in the opponent's court", "Back boundary line"],
                answer: 0
            },
            {
                id: 2,
                question: "Which line marks the end of the court?",
                options: ["Short service line", "Center line", "Back boundary line", "Doubles sideline"],
                answer: 2
            },
            {
                id: 3,
                question: "In doubles, what is the width of the court?",
                options: ["Same as singles", "Wider than singles", "Narrower than singles", "It varies"],
                answer: 1
            },
            {
                id: 4,
                question: "Which line divides the court into left and right service courts?",
                options: ["Short service line", "Center line", "Back boundary line", "Doubles sideline"],
                answer: 1
            },
            {
                id: 5,
                question: "Where must a serve land to be considered good?",
                options: ["Before the short service line", "On any line", "Beyond the back boundary line", "In the correct service court"],
                answer: 3
            }
        ];

        // Initialize the game
        game = new Phaser.Game(config);

        function preload() {
            // Load any assets here if needed
        }

        function create() {
            // Draw the badminton court
            drawCourt();
            
            // Create info text
            infoText = this.add.text(50, 330, "Select a mode to begin! Click on court areas to learn about them.", {
                font: "14px Arial",
                fill: "#ffffff",
                wordWrap: { width: 700 }
            });
            
            // Set up button event listeners
            document.getElementById('learn-btn').addEventListener('click', () => switchMode('learn', this));
            document.getElementById('quiz-btn').addEventListener('click', () => switchMode('quiz', this));
            document.getElementById('reset-btn').addEventListener('click', () => resetGame(this));
            
            // Update total questions count
            document.getElementById('total-questions').textContent = quizQuestions.length;
            
            // Initial mode
            switchMode('learn', this);
        }

        function update() {
            // Game update loop
        }

        function drawCourt() {
            // Clear previous graphics
            if (courtGraphics) {
                courtGraphics.destroy();
            }
            
            // Create new graphics
            courtGraphics = game.scene.scenes[0].add.graphics();
            
            // Draw court outline
            courtGraphics.lineStyle(4, 0xffffff, 1);
            courtGraphics.strokeRect(300, 30, 450, 350);
            
            // Draw net
            courtGraphics.lineStyle(3, 0xffffff, 1);
            courtGraphics.beginPath();
            courtGraphics.moveTo(300, 200);
            courtGraphics.lineTo(750, 200);
            courtGraphics.strokePath();
            
            // Draw court areas
            courtAreas.forEach(area => {
                courtGraphics.lineStyle(2, area.color, 1);
                courtGraphics.fillStyle(area.color, 0.3);
                courtGraphics.fillRect(area.x, area.y, area.width, area.height);
                courtGraphics.strokeRect(area.x, area.y, area.width, area.height);
                
                // Make areas interactive
                const zone = game.scene.scenes[0].add.zone(area.x, area.y, area.width, area.height).setOrigin(0).setInteractive();
                zone.areaData = area;
                
                zone.on('pointerover', () => {
                    if (currentMode === 'learn') {
                        courtGraphics.fillStyle(area.color, 0.6);
                        courtGraphics.fillRect(area.x, area.y, area.width, area.height);
                        infoText.setText(area.name + ": " + area.description);
                    }
                });
                
                zone.on('pointerout', () => {
                    courtGraphics.fillStyle(area.color, 0.3);
                    courtGraphics.fillRect(area.x, area.y, area.width, area.height);
                    if (currentMode === 'learn') {
                        infoText.setText("Select a court area to learn about it.");
                    }
                });
                
                zone.on('pointerdown', () => {
                    if (currentMode === 'learn') {
                        infoText.setText(area.name + ": " + area.description);
                    }
                });
            });
            
            // Add labels
            courtAreas.forEach(area => {
                if (area.name !== "Back Boundary Line" && area.name !== "Short Service Line") {
                    const labelX = area.x + area.width/2;
                    const labelY = area.y + area.height/2;
                    
                    game.scene.scenes[0].add.text(labelX, labelY, area.name.split(' ')[0], {
                        font: "10px Arial",
                        fill: "#ffffff",
                        align: "center"
                    }).setOrigin(0.5);
                }
            });
            
            // Add net label
            game.scene.scenes[0].add.text(525, 190, "NET", {
                font: "14px Arial",
                fill: "#ffffff"
            }).setOrigin(0.5);
        }

        function switchMode(mode, scene) {
            currentMode = mode;
            
            // Clear previous quiz elements
            if (quizQuestion) quizQuestion.destroy();
            quizOptions.forEach(opt => opt.destroy());
            quizOptions = [];
            
            if (mode === 'learn') {
                infoText.setText("Learn Mode: Click on different court areas to learn about them.");
                document.getElementById('learn-btn').style.background = '#4ecdc4';
                document.getElementById('quiz-btn').style.background = '#ff6b6b';
                document.getElementById('completion-message').style.display = 'none';
            } else if (mode === 'quiz') {
                infoText.setText("Quiz Mode: Answer questions about badminton court rules.");
                document.getElementById('learn-btn').style.background = '#ff6b6b';
                document.getElementById('quiz-btn').style.background = '#4ecdc4';
                
                // Check if all questions have been answered correctly
                if (answeredQuestions.size >= quizQuestions.length) {
                    document.getElementById('completion-message').style.display = 'block';
                    infoText.setText("You've answered all questions correctly! Reset the game to start over.");
                } else {
                    document.getElementById('completion-message').style.display = 'none';
                    startQuiz(scene);
                }
            }
        }

        function startQuiz(scene) {
            // Get questions that haven't been answered correctly
            const unansweredQuestions = quizQuestions.filter(q => !answeredQuestions.has(q.id));
            
            // If all questions have been answered, show completion message
            if (unansweredQuestions.length === 0) {
                document.getElementById('completion-message').style.display = 'block';
                infoText.setText("You've answered all questions correctly! Reset the game to start over.");
                return;
            }
            
            // Select a random question from unanswered ones
            const questionData = unansweredQuestions[Math.floor(Math.random() * unansweredQuestions.length)];
            correctAnswer = questionData.answer;
            
            // Display question
            quizQuestion = scene.add.text(400, 330, questionData.question, {
                font: "16px Arial",
                fill: "#ffffff",
                align: "center",
                wordWrap: { width: 750 }
            }).setOrigin(0.5);
            
            // Display options
            const optionsY = [350, 365, 380, 395];
            questionData.options.forEach((option, index) => {
                const optionText = scene.add.text(400, optionsY[index], `${index + 1}. ${option}`, {
                    font: "14px Arial",
                    fill: "#ffff00",
                    align: "center"
                }).setOrigin(0.5).setInteractive();
                
                optionText.on('pointerdown', () => checkQuizAnswer(index, questionData.id, optionText));
                quizOptions.push(optionText);
            });
        }

        function checkQuizAnswer(selectedIndex, questionId, optionText) {
            if (currentMode !== 'quiz') return;
            
            if (selectedIndex === correctAnswer) {
                infoText.setText("Correct! " + quizQuestions.find(q => q.id === questionId).options[correctAnswer] + " is the right answer.");
                score += 10;
                correctlyAnswered++;
                answeredQuestions.add(questionId);
                optionText.setColor("#00ff00");
                
                // Update progress
                document.getElementById('progress').textContent = correctlyAnswered;
            } else {
                infoText.setText("Incorrect. The correct answer is: " + quizQuestions.find(q => q.id === questionId).options[correctAnswer]);
                score = Math.max(0, score - 5);
                optionText.setColor("#ff0000");
                quizOptions[correctAnswer].setColor("#00ff00");
            }
            
            document.getElementById('score').textContent = score;
            
            // Next question after a delay
            game.scene.scenes[0].time.delayedCall(2000, () => {
                switchMode('quiz', game.scene.scenes[0]);
            });
        }

        function resetGame(scene) {
            score = 0;
            correctlyAnswered = 0;
            answeredQuestions.clear();
            document.getElementById('score').textContent = score;
            document.getElementById('progress').textContent = correctlyAnswered;
            document.getElementById('completion-message').style.display = 'none';
            switchMode('learn', scene);
        }
    </script>
</body>
</html>