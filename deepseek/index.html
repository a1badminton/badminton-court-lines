<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Badminton Court Knowledge Quiz</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            width: 900px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
            text-align: center;
        }
        h1 {
            font-size: 2rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin: 5px 0;
        }
        .instructions {
            background: rgba(0, 0, 0, 0.6);
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        #game-container {
            flex: 1;
            border: 3px solid #fff;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }
        .score-display {
            font-size: 1.2rem;
            margin: 8px 0;
            font-weight: bold;
        }
        .progress-display {
            font-size: 0.9rem;
            margin: 5px 0;
        }
        .btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .btn:hover {
            background: #ff8e8e;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.4);
        }
        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .mode-btn {
            background: #4ecdc4;
        }
        .mode-btn:hover {
            background: #81e8e1;
        }
        .footer {
            margin-top: 10px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
        }
        .completion-message {
            font-size: 1.2rem;
            color: #4ecdc4;
            font-weight: bold;
            margin-top: 10px;
        }
        .controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Badminton Court Knowledge Quiz</h1>
        <div class="instructions">
            <p>Learn about badminton court lines and service areas! Click on different game modes to start.</p>
        </div>
        
        <div class="score-display">Score: <span id="score">0</span></div>
        <div class="progress-display">Progress: <span id="progress">0</span>/<span id="total-questions">5</span> questions answered correctly</div>
        
        <div id="game-container"></div>
        
        <div class="controls">
            <button id="learn-btn" class="btn mode-btn">Learn Mode</button>
            <button id="quiz-btn" class="btn">Quiz Mode</button>
            <button id="reset-btn" class="btn">Reset Game</button>
        </div>
        
        <div id="completion-message" class="completion-message" style="display: none;">
            Congratulations! You've answered all questions correctly!
        </div>
        
        <div class="footer">
            <p>Created with Phaser.js | Hover over court areas to learn, then test your knowledge in Quiz Mode!</p>
        </div>
    </div>

    <script>
        // Main game configuration
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 400,
            parent: 'game-container',
            backgroundColor: '#2c3e50',
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        // Game variables
        let game;
        let score = 0;
        let currentMode = 'learn';
        let courtGraphics;
        let infoText;
        let quizQuestion;
        let quizOptions = [];
        let correctAnswer;
        let answeredQuestions = new Set();
        let correctlyAnswered = 0;

        // Court dimensions and layout
        // Court is 44ft x 20ft, divided into two 22ft x 20ft halves by the net
        const courtWidth = 660;  // pixels (maintaining 44:20 ratio)
        const courtHeight = 300; // pixels
        const courtX = 70;       // x position to center the court
        const courtY = 50;       // y position to center the court
        
        // Calculate positions based on court dimensions
        const netPosition = courtX + courtWidth / 2;
        const shortServiceLineDistance = (6.5 / 22) * (courtWidth / 2); // 6.5ft from net in a 22ft half

        // Badminton court data - using correct dimensions and ratios
        const courtAreas = [
            // Full court outline
            { name: "Full Court", x: courtX, y: courtY, width: courtWidth, height: courtHeight, color: 0xffffff, description: "The full badminton court, 44ft x 20ft for doubles, 44ft x 17ft for singles." },
            
            // Net (divides court into two halves)
            { name: "Net", x: netPosition, y: courtY, width: 2, height: courtHeight, color: 0xffffff, description: "The net divides the court into two equal halves. It stands 1.55m (5ft 1in) high at the edges and 1.524m (5ft) high in the center." },
            
            // Serving side (left half)
            { name: "Serving Side", x: courtX, y: courtY, width: courtWidth/2, height: courtHeight, color: 0x333333, description: "The serving side of the court. Players serve from this side to the receiving side." },
            
            // Receiving side (right half)
            { name: "Receiving Side", x: netPosition, y: courtY, width: courtWidth/2, height: courtHeight, color: 0x444444, description: "The receiving side of the court. Players receive serves on this side." },
            
            // Short Service Line (Serving Side)
            { name: "Short Service Line (Serving Side)", x: courtX, y: courtY + shortServiceLineDistance, width: courtWidth/2, height: 2, color: 0xffff00, description: "Short service line on serving side. Serves must land beyond this line." },
            
            // Short Service Line (Receiving Side)
            { name: "Short Service Line (Receiving Side)", x: netPosition, y: courtY + shortServiceLineDistance, width: courtWidth/2, height: 2, color: 0xffff00, description: "Short service line on receiving side. Serves must land beyond this line." },
            
            // Right Service Court (Serving Side)
            { name: "Right Service Court (Serving Side)", x: courtX, y: courtY, width: courtWidth/4, height: shortServiceLineDistance, color: 0xff6b6b, description: "Right service court on serving side. Serves must land diagonally opposite in this area." },
            
            // Left Service Court (Serving Side)
            { name: "Left Service Court (Serving Side)", x: courtX + courtWidth/4, y: courtY, width: courtWidth/4, height: shortServiceLineDistance, color: 0x4ecdc4, description: "Left service court on serving side. Serves must land diagonally opposite in this area." },
            
            // Right Service Court (Receiving Side)
            { name: "Right Service Court (Receiving Side)", x: netPosition, y: courtY, width: courtWidth/4, height: shortServiceLineDistance, color: 0xff6b6b, description: "Right service court on receiving side. Serves must land diagonally opposite in this area." },
            
            // Left Service Court (Receiving Side)
            { name: "Left Service Court (Receiving Side)", x: netPosition + courtWidth/4, y: courtY, width: courtWidth/4, height: shortServiceLineDistance, color: 0x4ecdc4, description: "Left service court on receiving side. Serves must land diagonally opposite in this area." },
            
            // Center Line (dividing left and right service courts)
            { name: "Center Line", x: courtX + courtWidth/4, y: courtY, width: 2, height: shortServiceLineDistance, color: 0xffffff, description: "Divides the service courts into left and right sections." },
            
            // Center Line (Receiving Side)
            { name: "Center Line (Receiving Side)", x: netPosition + courtWidth/4, y: courtY, width: 2, height: shortServiceLineDistance, color: 0xffffff, description: "Divides the service courts into left and right sections on receiving side." },
            
            // Back Boundary Line
            { name: "Back Boundary Line", x: courtX, y: courtY + courtHeight, width: courtWidth, height: 2, color: 0xffffff, description: "The back boundary line. Shots landing beyond this line are out." },
            
            // Side Line (Doubles)
            { name: "Side Line (Doubles)", x: courtX, y: courtY, width: 2, height: courtHeight, color: 0xffffff, description: "Side boundary line for doubles. Shots landing outside this line are out in doubles play." },
            
            // Side Line (Doubles - Right)
            { name: "Side Line (Doubles - Right)", x: courtX + courtWidth, y: courtY, width: 2, height: courtHeight, color: 0xffffff, description: "Side boundary line for doubles. Shots landing outside this line are out in doubles play." }
        ];

        // Quiz questions
        const quizQuestions = [
            {
                id: 1,
                question: "Where must a serve land in singles when serving to the right?",
                options: ["Right Service Court", "Left Service Court", "Anywhere in the opponent's court", "Back boundary line"],
                answer: 0
            },
            {
                id: 2,
                question: "How far from the net is the short service line?",
                options: ["6.5 feet", "10 feet", "15 feet", "20 feet"],
                answer: 0
            },
            {
                id: 3,
                question: "In doubles, what is the width of the court?",
                options: ["17 feet", "20 feet", "22 feet", "44 feet"],
                answer: 1
            },
            {
                id: 4,
                question: "Which line divides the service courts into left and right sections?",
                options: ["Short service line", "Center line", "Long service line", "Side line"],
                answer: 1
            },
            {
                id: 5,
                question: "Where must a serve land to be considered good?",
                options: ["Before the short service line", "On any line", "Beyond the back boundary line", "In the correct service court"],
                answer: 3
            }
        ];

        // Initialize the game
        game = new Phaser.Game(config);

        function preload() {
            // Load any assets here if needed
        }

        function create() {
            // Draw the badminton court
            drawCourt();
            
            // Create info text
            infoText = this.add.text(50, 330, "Select a mode to begin! Click on court areas to learn about them.", {
                font: "14px Arial",
                fill: "#ffffff",
                wordWrap: { width: 700 }
            });
            
            // Set up button event listeners
            document.getElementById('learn-btn').addEventListener('click', () => switchMode('learn', this));
            document.getElementById('quiz-btn').addEventListener('click', () => switchMode('quiz', this));
            document.getElementById('reset-btn').addEventListener('click', () => resetGame(this));
            
            // Update total questions count
            document.getElementById('total-questions').textContent = quizQuestions.length;
            
            // Initial mode
            switchMode('learn', this);
        }

        function update() {
            // Game update loop
        }

        function drawCourt() {
            // Clear previous graphics
            if (courtGraphics) {
                courtGraphics.destroy();
            }
            
            // Create new graphics
            courtGraphics = game.scene.scenes[0].add.graphics();
            
            // Draw court areas
            courtAreas.forEach(area => {
                courtGraphics.lineStyle(2, area.color, 1);
                
                if (area.name.includes("Service Court")) {
                    courtGraphics.fillStyle(area.color, 0.3);
                    courtGraphics.fillRect(area.x, area.y, area.width, area.height);
                } else if (area.name.includes("Side")) {
                    // Just draw the outline for sides
                    courtGraphics.strokeRect(area.x, area.y, area.width, area.height);
                } else {
                    courtGraphics.strokeRect(area.x, area.y, area.width, area.height);
                }
                
                // Make areas interactive
                const zone = game.scene.scenes[0].add.zone(area.x, area.y, area.width, area.height).setOrigin(0).setInteractive();
                zone.areaData = area;
                
                zone.on('pointerover', () => {
                    if (currentMode === 'learn') {
                        if (area.name.includes("Service Court")) {
                            courtGraphics.fillStyle(area.color, 0.6);
                            courtGraphics.fillRect(area.x, area.y, area.width, area.height);
                        } else {
                            courtGraphics.lineStyle(3, 0xffff00, 1);
                            courtGraphics.strokeRect(area.x, area.y, area.width, area.height);
                        }
                        infoText.setText(area.name + ": " + area.description);
                    }
                });
                
                zone.on('pointerout', () => {
                    if (area.name.includes("Service Court")) {
                        courtGraphics.fillStyle(area.color, 0.3);
                        courtGraphics.fillRect(area.x, area.y, area.width, area.height);
                    } else {
                        courtGraphics.lineStyle(2, area.color, 1);
                        courtGraphics.strokeRect(area.x, area.y, area.width, area.height);
                    }
                    if (currentMode === 'learn') {
                        infoText.setText("Select a court area to learn about it.");
                    }
                });
                
                zone.on('pointerdown', () => {
                    if (currentMode === 'learn') {
                        infoText.setText(area.name + ": " + area.description);
                    }
                });
            });
            
            // Add labels
            courtAreas.forEach(area => {
                if (area.name.includes("Service Court")) {
                    const labelX = area.x + area.width/2;
                    const labelY = area.y + area.height/2;
                    
                    const labelText = area.name.includes("Right") ? "Right" : "Left";
                    const courtSide = area.name.includes("Serving") ? "Serve" : "Receive";
                    
                    game.scene.scenes[0].add.text(labelX, labelY, `${labelText}\n${courtSide}`, {
                        font: "10px Arial",
                        fill: "#ffffff",
                        align: "center",
                        backgroundColor: "#2c3e50"
                    }).setOrigin(0.5);
                }
            });
            
            // Add net label
            game.scene.scenes[0].add.text(netPosition, courtY + courtHeight/2, "NET", {
                font: "14px Arial",
                fill: "#ffffff",
                backgroundColor: "#2c3e50"
            }).setOrigin(0.5);
            
            // Add court side labels
            game.scene.scenes[0].add.text(courtX + courtWidth/4, courtY - 15, "Serving Side", {
                font: "12px Arial",
                fill: "#ffffff",
                backgroundColor: "#2c3e50"
            }).setOrigin(0.5);
            
            game.scene.scenes[0].add.text(courtX + 3*courtWidth/4, courtY - 15, "Receiving Side", {
                font: "12px Arial",
                fill: "#ffffff",
                backgroundColor: "#2c3e50"
            }).setOrigin(0.5);
            
            // Add short service line labels
            game.scene.scenes[0].add.text(courtX + courtWidth/4, courtY + shortServiceLineDistance + 10, "Short Service Line", {
                font: "10px Arial",
                fill: "#ffff00",
                backgroundColor: "#2c3e50"
            }).setOrigin(0.5);
            
            game.scene.scenes[0].add.text(courtX + 3*courtWidth/4, courtY + shortServiceLineDistance + 10, "Short Service Line", {
                font: "10px Arial",
                fill: "#ffff00",
                backgroundColor: "#2c3e50"
            }).setOrigin(0.5);
        }

        function switchMode(mode, scene) {
            currentMode = mode;
            
            // Clear previous quiz elements
            if (quizQuestion) quizQuestion.destroy();
            quizOptions.forEach(opt => opt.destroy());
            quizOptions = [];
            
            if (mode === 'learn') {
                infoText.setText("Learn Mode: Click on different court areas to learn about them.");
                document.getElementById('learn-btn').style.background = '#4ecdc4';
                document.getElementById('quiz-btn').style.background = '#ff6b6b';
                document.getElementById('completion-message').style.display = 'none';
                
                // Redraw court to reset any highlights
                drawCourt();
            } else if (mode === 'quiz') {
                infoText.setText("Quiz Mode: Answer questions about badminton court rules.");
                document.getElementById('learn-btn').style.background = '#ff6b6b';
                document.getElementById('quiz-btn').style.background = '#4ecdc4';
                
                // Check if all questions have been answered correctly
                if (answeredQuestions.size >= quizQuestions.length) {
                    document.getElementById('completion-message').style.display = 'block';
                    infoText.setText("You've answered all questions correctly! Reset the game to start over.");
                } else {
                    document.getElementById('completion-message').style.display = 'none';
                    startQuiz(scene);
                }
            }
        }

        function startQuiz(scene) {
            // Get questions that haven't been answered correctly
            const unansweredQuestions = quizQuestions.filter(q => !answeredQuestions.has(q.id));
            
            // If all questions have been answered, show completion message
            if (unansweredQuestions.length === 0) {
                document.getElementById('completion-message').style.display = 'block';
                infoText.setText("You've answered all questions correctly! Reset the game to start over.");
                return;
            }
            
            // Select a random question from unanswered ones
            const questionData = unansweredQuestions[Math.floor(Math.random() * unansweredQuestions.length)];
            correctAnswer = questionData.answer;
            
            // Display question
            quizQuestion = scene.add.text(400, 330, questionData.question, {
                font: "16px Arial",
                fill: "#ffffff",
                align: "center",
                wordWrap: { width: 750 }
            }).setOrigin(0.5);
            
            // Display options
            const optionsY = [350, 365, 380, 395];
            questionData.options.forEach((option, index) => {
                const optionText = scene.add.text(400, optionsY[index], `${index + 1}. ${option}`, {
                    font: "14px Arial",
                    fill: "#ffff00",
                    align: "center"
                }).setOrigin(0.5).setInteractive();
                
                optionText.on('pointerdown', () => checkQuizAnswer(index, questionData.id, optionText));
                quizOptions.push(optionText);
            });
        }

        function checkQuizAnswer(selectedIndex, questionId, optionText) {
            if (currentMode !== 'quiz') return;
            
            if (selectedIndex === correctAnswer) {
                infoText.setText("Correct! " + quizQuestions.find(q => q.id === questionId).options[correctAnswer] + " is the right answer.");
                score += 10;
                correctlyAnswered++;
                answeredQuestions.add(questionId);
                optionText.setColor("#00ff00");
                
                // Update progress
                document.getElementById('progress').textContent = correctlyAnswered;
            } else {
                infoText.setText("Incorrect. The correct answer is: " + quizQuestions.find(q => q.id === questionId).options[correctAnswer]);
                score = Math.max(0, score - 5);
                optionText.setColor("#ff0000");
                quizOptions[correctAnswer].setColor("#00ff00");
            }
            
            document.getElementById('score').textContent = score;
            
            // Next question after a delay
            game.scene.scenes[0].time.delayedCall(2000, () => {
                switchMode('quiz', game.scene.scenes[0]);
            });
        }

        function resetGame(scene) {
            score = 0;
            correctlyAnswered = 0;
            answeredQuestions.clear();
            document.getElementById('score').textContent = score;
            document.getElementById('progress').textContent = correctlyAnswered;
            document.getElementById('completion-message').style.display = 'none';
            switchMode('learn', scene);
        }
    </script>
</body>
</html>